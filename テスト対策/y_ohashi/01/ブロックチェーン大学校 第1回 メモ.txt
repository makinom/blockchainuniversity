■ブロックチェーン大学校 第1回
ブロックチェーン、ビットコイン、暗号金融技術の概要





■ブロックチェーン大学校　第1回
Overview of Bitcoin, Blockchain, and Cryptofinancial Technology

https://drive.google.com/file/d/0B16ju7dlIAKfUEswNTlrSzFxQk0/view

https://goo.gl/forms/TdNIT3GfeekaSqgt1

ジョナサンアンダーウッド
ビットバンク

○自己紹介
日本語ペラペラ
ゲーム開発に興味をもっていた
暗号学
銀行なしの送金で調べたらビットコインが出てきた
オープンソースはコード書いてなんぼ
Electrum → python
オープンソースで自分の好きな言語のライブラリを見つけてプルリク出すのが一番勉強になる
BIP　ビットコインインプルーブメントプロポーザル
Samurai wallet アンドロイドのアプリ
BIP39　ニーモニックのBIP

○ビットコインの歴史および技術
−暗号学
ホイットフォールド・ディフィー
DigiCash　暗号学を使って認証を行ってお金のやり取りをする的な考え
Hashcash プルーフオブワークに似たアルゴリズムを使って演算力を価値に置き換えてそれを送りあう仕組み。お金の代わりというよりは迷惑メール防止をしたかったために。1人にメールするための演算力を大きくするようなやつ
Hashcashはアダム・バックさんが作ったというのが明確なので政府とかから攻撃されやすかった。中央サーバーだったから停止されたり。
Bitcoinのホワイトペーパー　暗号学が好きな人のメーリングリストで流された
ナカモト・サトシ　匿名（ハンドルネーム）
Bitcoinの原子ブロック　世界初のブロックチェーンが始まった

匿名でホワイトペーパー
オープンソース
P2P

今までの失敗事例を繰り返さないような形にできた

−お金
昔は狩人社会。獲物を分けたから手伝ってくれ。貸し借り。
それをどういう風に記録していくか？というのが人間的に考えられた
＝価値の代行となるもの。
複製できてはならない。火事とか雨とかで消滅してもいけない。＝お金にないといけない属性
→金とか銀などの価値あるものがそれにあたった
ブレトン・ウッズ協定　金から離脱？
→お金をいくらでも創出できる世界になってしまった

石貨　大昔に価値の代行として使われた
Bitcoinに似ているところがある
重いので動かない。動かせない。公共のみんなが見える場所で、この石は誰の、これは誰のというのがわかる状態。そのうえで所有権を移動させたりした。

働きをした証。切り出したりした結果
所有権の管理は社会全員で担う。



ビットコインのブロックチェーンの概観
取引＝データのオブジェクトとして存在する
1秒間に5取引とかが生まれる。全世界のノードを飛び回っている。
ビットコインの所有権を証明するもの＝電子署名＆公開鍵
すべてのノードが取引を認証してからほかのノードに送る。失敗したら誰にも伝搬しないで捨てる。

ブロック自体には取引データは含まれていない。
マークルツリーのマークルルーツがヘッダに含まれている。
どんなに取引を増やしたとしてもプルーフオブワークをかけているものは固定の長さのブロックヘッダになる。
古いブロックがどんどん改竄されにくくなる構造
6ブロック前のデータを改ざんしたかったら、6個前のデータまですべてを改ざんしないといけない。

エクサハッシュ　1秒間に○エクサハッシュをかけるくらいすごいハッシュの計算量が必要
世界の最速コンピュータ30台集めてもその処理量に勝つことはできないといわれている。

送金者が送ったビットコインが本当にそのネットワークで作られたかもチェックしている
すべての取引には入力と出力がある
パズルが出力・入力はパズルの結果を元に送金とかをする
上にたどっていくと採掘者が発掘したビットコインにたどり着く。たどり着かない場合は破棄される。

ブロックのチェーンがありその中に取引のチェーンが星の数ほどある。

・原始ブロック
ビットコインを知りたかったらオルトコインを作ってみるのがいい経験になる。
原始ブロックの採掘をどうする？ソースでしてしまう。プルーフオブワークを低い難度でやる。とかいろいろ方法がある。始めてのビットコインが生まれる。

・コインベース取引
1ブロック当たり1つしかできない。

各ブロックに含まれるもの
ブロックヘッダーをsha256で2回ハッシュ、32バイトのハッシュをさらにハッシュ
ディフィカルティターゲット（目標とする値）以下のハッシュだけが正常なもの、ブロックとして認められる
ランダムなプロセスなのでばらつきはある

Cryptgraphy暗号化して複合化したりしてるの？あんま関係ない。
ハッシュ関数（一方通行のハッシュ）と電子署名という部分でだけ暗号化が使われてる

☆重要な概念
採掘→半減期がある
徐々に供給が減っていく、デフレーションベースのカレンシーがあってもいいのでは？デフレの通貨があてもいいのでは？とサトシ・ナカモトは考えていた。
21万ブロックに1回（10分に1回と考えると4年に1度）

ハッシュレートが下がるかと思われたが特に大丈夫だった。

徐々に下がるのではなくて、どんっと下がるの。経済学がエンジニアに影響を及ぼすということがあんまりないので興味深い部分でもある。

採掘やるには今はASICsを買わないとダメ

ブルームフィルター？

SPV　ヘッダーから、関係がありそうな取引とかを参照する。その取引が正常なのか？を確認できる。自分の送金・受金には安全・安心なセキュリティモデルになっている。

プロダクトとしてやるならフルノードで

秘密鍵は自分で管理する！
　マウントゴックスとかは秘密鍵の管理を任せていた。

テストネット＝価値のないビットコインがあるので、そういうので勉強する。本物のビットコインじゃ危ない。

ナカモト・サトシ名言集は全部読むべき

ビザンチン将軍問題

ザ・ブロックチェーン読む
　ブロックチェーンという言葉はホワイトペーパーとかソースコード内にもない。

初めてのブロックチェーンは分散型電子マネーが主。

○オルトコインおよびその他のブロックチェーン
別のアルゴリズムで採掘したりしている（ハッシュのアルゴリズムが違う）
Dogecoin、MonacoinはLitecoinのフォーク。
Etherium以外は追加機能はほとんどない。

ビットコインの時価総額：1兆円規模になっている

ブロックチェーンの他の用途

スマートプロパティ：一時的にカギを送るようなこともできることが予想される。1時間のみ有効にするカギとしてスマートコントラクトとする。とか。

ハッシュチェーンを使った存在証明とかで、過去のいつの時点で所有してましたよという証明ができそう。

DAC＆DAO　参加してるユーザーが権利の分散とかをしながら組織。DAOはもうやばいくらいお金が出てった。ソシャゲの補てんとかじゃ効かない。セキュリティが第一すぎる。

分散の合意とかがかわりそうな場合はブロックチェーンを検討してもよいかも

許可権限型ブロックチェーン
　記入及びその他のユースケースもあるのでリンク先見てみて

OpenChain、MultiChainは気軽に試せる。

MultiChainのほうが使いやすい？
　複数のブロックチェーンを管理するためのブロックチェーン
　ビットコインを取り込んだりもできる
　権限付与とかも

いーさりあむ
　原始ブロックにはハードコーディングで投資してくれた人のが書いてある。
　金融系のスマートコントラクトは厳格に変数とか定義しないといけないのでは？DAOの事件より
　スマートコントラクトがたくさん実行されてほしい。いーさりあむ上でいろいろあってほしい。
　記事のリンクもおすすめ

○非ブロックチェーン
ブロックチェーンの動きをまねたもの
PoWはされてない。
銀行同士で信用しあってるというような状況で使うという思想で生まれてる。

セキュリティーについて
ビットコインの取引は巻き戻せないレベルになってる

サイドチェーンというのがある。
マージマイニングというのがある。

カラードコイン
　ビットコインの取引データにメタデータを含める
　プロトコル：カウンターパーティーというのもある。けーたいからトークン発行できる
　XCPというオルトコインXCPを消費して名前をつけたコインとかを発行？できる。

双方向ぺぐーさいどちぇーん　→　ムズイけどすごそう。

○ビットコインの経済環境
採掘をしてる法人がある

ストレージ
　安全に秘密鍵を補完できるサービス

マーチャント
　namecheep

BTCニュース.jp

BITWAGE
　会社の給料の振り込みをビットコインにして送金してくれる


○ビットコインの実装事例
使えるライブラリを言語ごとに紹介







カレンシー？
ハッシュレート？

サトシを売買


○質疑応答
・セキュリティで盗むとかを防ぐには？
HSM（ハードウェアセキュリティモジュール）
ハードウェアウォレット

マルチシグネチャー：15名までできる。3つのカギを作るのが主流。手数料とか膨大になるから。

・ETCについて
ブロックチェーンは取り返しのつかないところがいい！→ETC
いーさりあむ特殊なブロックチェーン
ビタリクさんもハードフォークしたくなかったとは思うけど、たくさん投資してもらっている現状があったためにハードフォークをせざるおえなかったのでは・・？

盗んだのはスマートコントラクトの期待通りの動作をした。投資した人の自己責任かもね。


ブロックチェーンの上段にもう一つ緩めの層が出てきてもいいのかも。


セグウィッド→入力の部分が圧縮できる。
サイドチェーンは出力の量が多くなってしまうので、まだ課題は多い。

ブロックチェーンの長所
　・分散型の合意
　・公開認証

医療の世界
　患者の持ってる秘密鍵で暗号化したデータをブロックチェーンに乗せて認証する。とかされてるけどまだまだ途上。
　初診の時にいろいろ聞かれるのがやなのでそういうのが解決できるといい。



codeboard.io


base58
→base64から分かりにくい文字を除いたもの


課題：codeboard.ioのアカウントを作って提出する